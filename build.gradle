plugins {
  //inlude the nodeJS plugin to execute nodejs and npm tasks
  id "com.moowork.node" version "1.2.0"
  // includ zip plugin
  id 'distribution'
}

node {
	download = true
	version = "9.11.1"
	npmVersion = "5.6.0"
}

//declare a build task
task mybuild

//declare a task to create a zip of the app
 
apply plugin: 'java'

task ZIPBUILD(type: Zip){
     from"/home/cloud_user/CICD_Jenkins_Pipeline_SampleProject"
     destinationDirectory = file("/home/cloud_user")
     archiveFileName = "MyGradle.zip"
} 


//declare task dependencies

build.dependsOn ZIPBUILD
npm_build.dependsOn npm_test
npm_test.dependsOn npmInstall
npm_build.dependsOn npmInstall
